<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <changeSet id="010-insert-sample-data" author="cybersensei">
        
        <!-- Admin user (password: Demo123!) -->
        <insert tableName="users">
            <column name="name" value="Admin User"/>
            <column name="email" value="admin@cybersensei.io"/>
            <column name="role" value="ADMIN"/>
            <column name="department" value="IT Security"/>
            <column name="created_at" valueDate="now()"/>
            <column name="active" valueBoolean="true"/>
            <column name="password_hash" value="$2a$12$sqr41mxnozAIKFG1GT65m.IQHLSmcgjSdHN/flpdlwgh9u2eUcsVC"/>
        </insert>

        <!-- Phishing templates are now seeded by the phishing module -->

        <!-- Sample exercises en francais -->
        <insert tableName="exercises">
            <column name="topic" value="Reconnaissance du phishing"/>
            <column name="type" value="QUIZ"/>
            <column name="difficulty" value="BEGINNER"/>
            <column name="payload_json" value='{"courseIntro":"Le phishing est une technique de fraude visant a voler vos informations personnelles. Apprenez a reperer les signes.","questions":[{"id":"q1","text":"Quel est un signe courant de phishing ?","options":["Fautes de grammaire","Langage urgent","Liens suspects","Toutes ces reponses"],"correctAnswer":3},{"id":"q2","text":"Que devez-vous faire face a un email suspect ?","options":["Cliquer pour verifier","Le supprimer immediatement","Le signaler au service IT","Repondre pour demander des precisions"],"correctAnswer":2}]}'/>
            <column name="active" valueBoolean="true"/>
        </insert>

        <insert tableName="exercises">
            <column name="topic" value="Securite des mots de passe"/>
            <column name="type" value="QUIZ"/>
            <column name="difficulty" value="INTERMEDIATE"/>
            <column name="payload_json" value='{"courseIntro":"Un mot de passe fort est votre premiere ligne de defense. Decouvrez les bonnes pratiques.","questions":[{"id":"q1","text":"Quelle est la longueur minimale recommandee pour un mot de passe securise ?","options":["6 caracteres","8 caracteres","12 caracteres","16 caracteres"],"correctAnswer":2},{"id":"q2","text":"Quelle pratique est la plus securisee ?","options":["Utiliser le meme mot de passe partout","Noter ses mots de passe sur papier","Utiliser un gestionnaire de mots de passe","Changer de mot de passe tous les mois"],"correctAnswer":2}]}'/>
            <column name="active" valueBoolean="true"/>
        </insert>

        <!-- Sample configs -->
        <insert tableName="configs">
            <column name="config_key" value="company.name"/>
            <column name="config_value" value="CyberSensei Demo"/>
            <column name="description" value="Company name displayed in emails and UI"/>
            <column name="updated_at" valueDate="now()"/>
        </insert>

        <insert tableName="configs">
            <column name="config_key" value="smtp.enabled"/>
            <column name="config_value" value="true"/>
            <column name="description" value="Enable/disable email sending"/>
            <column name="updated_at" valueDate="now()"/>
        </insert>

    </changeSet>

</databaseChangeLog>


